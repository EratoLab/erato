{
  "openapi": "3.1.0",
  "info": {
    "title": "",
    "description": "The main API structure\n\n- `/api/v1beta/` <- Most of the API is nested under here. All of the resources there are scoped to what is accessible by the authenticated identity.\n- `/api/v1beta/me` <- Everything under this path is scoped to the subject of the authenticated identity.\nThis means that the identity may be authorized to view more resources, but this is the default view for them.\nE.g. the chats route scoped under there will only list the chats created by the user, but the user may be authorized to also view chats shared by other users.\n",
    "version": ""
  },
  "paths": {
    "/api/v1beta/assistants": {
      "get": {
        "tags": [
          "assistants"
        ],
        "summary": "List all assistants available to the user",
        "operationId": "list_assistants",
        "parameters": [
          {
            "name": "sharing_relation",
            "in": "query",
            "description": "Filter assistants by sharing relation\n- `all` (default): All assistants are listed\n- `owned_by_user`: Only assistants owned by the user\n- `shared_with_user`: Only assistants shared with the user (= all - owned_by_user)",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved user's assistants",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Assistant"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      },
      "post": {
        "tags": [
          "assistants"
        ],
        "summary": "Create a new assistant",
        "operationId": "create_assistant",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAssistantRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successfully created the assistant",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssistantWithFiles"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request data"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/assistants/{assistant_id}": {
      "get": {
        "tags": [
          "assistants"
        ],
        "summary": "Get a specific assistant with its files",
        "operationId": "get_assistant",
        "parameters": [
          {
            "name": "assistant_id",
            "in": "path",
            "description": "The ID of the assistant to retrieve",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved the assistant",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssistantWithFiles"
                }
              }
            }
          },
          "400": {
            "description": "Invalid assistant ID format"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "404": {
            "description": "Assistant not found or access denied"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      },
      "put": {
        "tags": [
          "assistants"
        ],
        "summary": "Update an existing assistant",
        "operationId": "update_assistant",
        "parameters": [
          {
            "name": "assistant_id",
            "in": "path",
            "description": "The ID of the assistant to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAssistantRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully updated the assistant",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AssistantWithFiles"
                }
              }
            }
          },
          "400": {
            "description": "Invalid assistant ID format or request data"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "404": {
            "description": "Assistant not found or access denied"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/assistants/{assistant_id}/archive": {
      "post": {
        "tags": [
          "assistants"
        ],
        "summary": "Archive an assistant",
        "operationId": "archive_assistant",
        "parameters": [
          {
            "name": "assistant_id",
            "in": "path",
            "description": "The ID of the assistant to archive",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ArchiveAssistantRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully archived the assistant",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ArchiveAssistantResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid assistant ID format"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "404": {
            "description": "Assistant not found or access denied"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/chats": {
      "get": {
        "tags": [],
        "operationId": "chats",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Chat"
                  }
                }
              }
            }
          }
        },
        "deprecated": true
      }
    },
    "/api/v1beta/chats/{chat_id}/archive": {
      "post": {
        "tags": [],
        "summary": "Archive a chat",
        "description": "This endpoint marks a chat as archived by setting its archived_at timestamp.\nArchived chats can be filtered out from the recent chats listing by default.",
        "operationId": "archive_chat_endpoint",
        "parameters": [
          {
            "name": "chat_id",
            "in": "path",
            "description": "The ID of the chat to archive",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ArchiveChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully archived the chat",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ArchiveChatResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid chat ID format"
          },
          "401": {
            "description": "User not authorized to archive this chat"
          },
          "404": {
            "description": "Chat not found"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/chats/{chat_id}/messages": {
      "get": {
        "tags": [],
        "summary": "Get all messages for a specific chat",
        "operationId": "chat_messages",
        "parameters": [
          {
            "name": "chat_id",
            "in": "path",
            "description": "The ID of the chat to get messages for",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of messages to return per page. Defaults to 100 if not provided. Larger values may impact performance.",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64",
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Number of messages to skip for pagination. Defaults to 0 if not provided.",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved messages with pagination metadata",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChatMessagesResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid chat ID format"
          },
          "500": {
            "description": "Server error while retrieving messages"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/files/{file_id}": {
      "get": {
        "tags": [],
        "summary": "Get a single file by its ID",
        "description": "This endpoint retrieves information about a specific file by its ID.",
        "operationId": "get_file",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "description": "The ID of the file to retrieve",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved the file",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadItem"
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "404": {
            "description": "When the file doesn't exist or doesn't belong to the user"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/integrations/sharepoint/all-drives": {
      "get": {
        "tags": [
          "sharepoint"
        ],
        "summary": "Get all drives accessible to the user.",
        "description": "This includes:\n- The user's personal OneDrive\n- Drives shared with the user\n- Recent items (as a pseudo-drive)",
        "operationId": "all_drives",
        "responses": {
          "200": {
            "description": "List of accessible drives",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AllDrivesResponse"
                }
              }
            }
          },
          "401": {
            "description": "No access token available"
          },
          "404": {
            "description": "Sharepoint integration is not enabled"
          },
          "500": {
            "description": "Failed to retrieve drives"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/integrations/sharepoint/drives/{drive_id}": {
      "get": {
        "tags": [
          "sharepoint"
        ],
        "summary": "Get the root items of a specific drive.",
        "operationId": "get_drive_root",
        "parameters": [
          {
            "name": "drive_id",
            "in": "path",
            "description": "The ID of the drive",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of items in the drive root",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriveItemsResponse"
                }
              }
            }
          },
          "401": {
            "description": "No access token available"
          },
          "404": {
            "description": "Drive not found or Sharepoint integration is not enabled"
          },
          "500": {
            "description": "Failed to retrieve drive items"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/integrations/sharepoint/drives/{drive_id}/items/{item_id}": {
      "get": {
        "tags": [
          "sharepoint"
        ],
        "summary": "Get details of a specific drive item.",
        "operationId": "get_drive_item",
        "parameters": [
          {
            "name": "drive_id",
            "in": "path",
            "description": "The ID of the drive",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "item_id",
            "in": "path",
            "description": "The ID of the item",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Drive item details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriveItemResponse"
                }
              }
            }
          },
          "401": {
            "description": "No access token available"
          },
          "404": {
            "description": "Item not found or Sharepoint integration is not enabled"
          },
          "500": {
            "description": "Failed to retrieve item"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/integrations/sharepoint/drives/{drive_id}/items/{item_id}/children": {
      "get": {
        "tags": [
          "sharepoint"
        ],
        "summary": "Get the children of a folder in a drive.",
        "operationId": "get_drive_item_children",
        "parameters": [
          {
            "name": "drive_id",
            "in": "path",
            "description": "The ID of the drive",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "item_id",
            "in": "path",
            "description": "The ID of the folder",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of items in the folder",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriveItemsResponse"
                }
              }
            }
          },
          "401": {
            "description": "No access token available"
          },
          "404": {
            "description": "Folder not found or Sharepoint integration is not enabled"
          },
          "500": {
            "description": "Failed to retrieve folder children"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/budget": {
      "get": {
        "tags": [
          "budget"
        ],
        "operationId": "budget_status",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BudgetStatusResponse"
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "When an internal server error occurs"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/chats": {
      "post": {
        "tags": [],
        "summary": "Create a new chat without an initial message",
        "description": "This endpoint allows creating a new chat without requiring an initial message.\nThis is useful for scenarios where you want to upload files before sending the first message.",
        "operationId": "create_chat",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully created a new chat",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateChatResponse"
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/chats/{chat_id}": {
      "put": {
        "tags": [],
        "summary": "Update mutable fields on a chat.",
        "description": "Currently supports updating only `title_by_user_provided`.",
        "operationId": "update_chat",
        "parameters": [
          {
            "name": "chat_id",
            "in": "path",
            "description": "The ID of the chat to update",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateChatRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully updated the chat",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UpdateChatResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid chat ID format"
          },
          "401": {
            "description": "User not authorized to update this chat"
          },
          "404": {
            "description": "Chat not found"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/facets": {
      "get": {
        "tags": [],
        "operationId": "facets",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FacetsResponse"
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/file-capabilities": {
      "get": {
        "tags": [],
        "summary": "Get available file capabilities",
        "description": "This endpoint returns all available file capabilities based on the configured\nfile processors and model capabilities. An optional model_id can be provided\nto get capabilities specific to that model (particularly for image understanding).",
        "operationId": "file_capabilities",
        "parameters": [
          {
            "name": "model_id",
            "in": "query",
            "description": "Optional model ID to get capabilities specific to that model",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved file capabilities",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FileCapability"
                  }
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "404": {
            "description": "When the specified model_id is not found"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/files": {
      "post": {
        "tags": [
          "files"
        ],
        "summary": "Upload files and return UUIDs for each",
        "description": "This endpoint accepts a multipart form with one or more files and returns UUIDs for each.\nIf chat_id is provided, files are associated with that chat. If not provided, files are created\nas standalone uploads that can be linked to assistants later.",
        "operationId": "upload_file",
        "parameters": [
          {
            "name": "chat_id",
            "in": "query",
            "description": "Optional chat ID to associate the file with. If not provided, creates standalone files.",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "Files to upload",
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/MultipartFormFile"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid file upload"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/api/v1beta/me/files/link": {
      "post": {
        "tags": [
          "files"
        ],
        "summary": "Link an external file (SharePoint, Google Drive, etc.) and return a file upload record",
        "description": "This endpoint creates a file upload record that references an external file,\nallowing it to be used in chat messages or attached to assistants.\nIf chat_id is provided, the file is associated with that chat. If not provided,\nthe file is created as a standalone upload.",
        "operationId": "link_file",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LinkFileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileUploadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request or unsupported source"
          },
          "401": {
            "description": "No access token available for external provider"
          },
          "404": {
            "description": "File not found or integration not enabled"
          },
          "500": {
            "description": "Server error"
          }
        }
      }
    },
    "/api/v1beta/me/frequent_assistants": {
      "get": {
        "tags": [],
        "operationId": "frequent_assistants",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of assistants to return. Defaults to 10 if not provided.",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64",
              "minimum": 0
            }
          },
          {
            "name": "days",
            "in": "query",
            "description": "Number of days to look back for usage statistics. Defaults to 30 if not provided.",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32",
              "minimum": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved frequently used assistants",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FrequentAssistantsResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error while retrieving assistants"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/messages/editstream": {
      "post": {
        "tags": [],
        "operationId": "edit_message_sse",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EditMessageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "text/event-stream": {
                "schema": {
                  "$ref": "#/components/schemas/EditMessageStreamingResponseMessage"
                }
              }
            }
          },
          "400": {
            "description": "When validation fails (e.g., invalid message role)"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "When an internal server error occurs"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/messages/regeneratestream": {
      "post": {
        "tags": [],
        "operationId": "regenerate_message_sse",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegenerateMessageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "text/event-stream": {
                "schema": {
                  "$ref": "#/components/schemas/RegenerateMessageStreamingResponseMessage"
                }
              }
            }
          },
          "400": {
            "description": "When validation fails (e.g., invalid message role)"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "When an internal server error occurs"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/messages/resumestream": {
      "post": {
        "tags": [],
        "operationId": "resume_message_sse",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ResumeStreamRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "text/event-stream": {
                "schema": {
                  "$ref": "#/components/schemas/MessageSubmitStreamingResponseMessage"
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "404": {
            "description": "No active generation task found for this chat"
          },
          "500": {
            "description": "When an internal server error occurs"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/messages/submitstream": {
      "post": {
        "tags": [],
        "operationId": "message_submit_sse",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MessageSubmitRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "text/event-stream": {
                "schema": {
                  "$ref": "#/components/schemas/MessageSubmitStreamingResponseMessage"
                }
              }
            }
          },
          "400": {
            "description": "When validation fails (e.g., invalid previous_message_id)"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "When an internal server error occurs"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/models": {
      "get": {
        "tags": [],
        "summary": "Get available chat models for the user",
        "description": "This endpoint returns all available chat models (providers) that the user can use.\nEach model includes the provider ID and display name.",
        "operationId": "available_models",
        "responses": {
          "200": {
            "description": "Successfully retrieved available models",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ChatModel"
                  }
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/organization/groups": {
      "get": {
        "tags": [
          "entra_id"
        ],
        "summary": "List all groups in the organization.",
        "description": "If the Entra ID integration is not enabled, returns an empty list.\nIf enabled, fetches groups from the MS Graph API.\nWhen is_involved=true, only returns groups the user is a member of.\nWhen query parameter is provided (even if empty), returns only the first page for performance.\nNon-empty queries use $search for fuzzy matching.",
        "operationId": "list_organization_groups",
        "parameters": [
          {
            "name": "is_involved",
            "in": "query",
            "description": "Filter to only show groups the requesting user is \"involved\" with.\nWhen true, only returns groups that the requesting user is a member of.",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "query",
            "in": "query",
            "description": "Optional search query to filter groups by displayName.\nUses Microsoft Graph $search parameter with fuzzy, tokenized matching.\nWhen provided (even if empty), only the first page of results is returned for performance.\nThis optimizes search field implementations where typing starts with an empty query.",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of organization groups",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationGroupsResponse"
                }
              }
            }
          },
          "401": {
            "description": "No access token available"
          },
          "500": {
            "description": "Failed to retrieve groups"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/organization/users": {
      "get": {
        "tags": [
          "entra_id"
        ],
        "summary": "List all users in the organization.",
        "description": "If the Entra ID integration is not enabled, returns an empty list.\nIf enabled, fetches users from the MS Graph API.\nWhen is_involved=true, only returns users who share at least one group with the requesting user.\nWhen query parameter is provided (even if empty), returns only the first page for performance.\nNon-empty queries use $search for fuzzy matching.",
        "operationId": "list_organization_users",
        "parameters": [
          {
            "name": "is_involved",
            "in": "query",
            "description": "Filter to only show users the requesting user is \"involved\" with.\nWhen true, only returns users who share at least one group with the requesting user.",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "query",
            "in": "query",
            "description": "Optional search query to filter users by displayName.\nUses Microsoft Graph $search parameter with fuzzy, tokenized matching.\nWhen provided (even if empty), only the first page of results is returned for performance.\nThis optimizes search field implementations where typing starts with an empty query.",
            "required": false,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of organization users",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OrganizationUsersResponse"
                }
              }
            }
          },
          "401": {
            "description": "No access token available"
          },
          "500": {
            "description": "Failed to retrieve users"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/profile": {
      "get": {
        "tags": [],
        "operationId": "profile",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfile"
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/me/recent_chats": {
      "get": {
        "tags": [],
        "operationId": "recent_chats",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "Maximum number of chats to return per page. Defaults to 30 if not provided. Larger values may impact performance.",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64",
              "minimum": 0
            }
          },
          {
            "name": "offset",
            "in": "query",
            "description": "Number of chats to skip for pagination. Defaults to 0 if not provided.",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int64",
              "minimum": 0
            }
          },
          {
            "name": "include_archived",
            "in": "query",
            "description": "Whether to include archived chats in results. Defaults to false if not provided.",
            "required": false,
            "schema": {
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved chats with pagination metadata",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RecentChatsResponse"
                }
              }
            }
          },
          "500": {
            "description": "Server error while retrieving chats"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/messages": {
      "get": {
        "tags": [],
        "operationId": "messages",
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Message"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/v1beta/messages/{message_id}/feedback": {
      "put": {
        "tags": [],
        "summary": "Submit or update feedback for a message",
        "operationId": "submit_message_feedback",
        "parameters": [
          {
            "name": "message_id",
            "in": "path",
            "description": "The ID of the message to submit feedback for",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MessageFeedbackRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Feedback successfully submitted or updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MessageFeedback"
                }
              }
            }
          },
          "400": {
            "description": "Invalid message ID or request format"
          },
          "403": {
            "description": "User does not have permission to submit feedback for this message, or the editing time limit has been exceeded"
          },
          "404": {
            "description": "Message not found"
          },
          "500": {
            "description": "Server error while submitting feedback"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/prompt-optimizer": {
      "post": {
        "tags": [],
        "summary": "Optimize a prompt using the configured prompt optimizer.",
        "operationId": "prompt_optimizer",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PromptOptimizerRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully optimized the prompt",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PromptOptimizerResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid prompt"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "404": {
            "description": "Prompt optimizer is not enabled"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/share-grants": {
      "get": {
        "tags": [
          "share_grants"
        ],
        "summary": "List share grants for a resource",
        "operationId": "list_share_grants",
        "parameters": [
          {
            "name": "resource_type",
            "in": "query",
            "description": "The type of resource (e.g., 'assistant')",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "resource_id",
            "in": "query",
            "description": "The ID of the resource",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved share grants",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ListShareGrantsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid query parameters"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "403": {
            "description": "User does not own the resource"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      },
      "post": {
        "tags": [
          "share_grants"
        ],
        "summary": "Create a new share grant",
        "operationId": "create_share_grant",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateShareGrantRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successfully created the share grant",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateShareGrantResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request data"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "403": {
            "description": "User does not own the resource"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/share-grants/{grant_id}": {
      "delete": {
        "tags": [
          "share_grants"
        ],
        "summary": "Delete a share grant",
        "operationId": "delete_share_grant",
        "parameters": [
          {
            "name": "grant_id",
            "in": "path",
            "description": "The ID of the share grant to delete",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successfully deleted the share grant"
          },
          "400": {
            "description": "Invalid grant ID format"
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "403": {
            "description": "User does not own the resource"
          },
          "404": {
            "description": "Share grant not found"
          },
          "500": {
            "description": "Server error"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/api/v1beta/token_usage/estimate": {
      "post": {
        "tags": [
          "token_usage"
        ],
        "operationId": "token_usage_estimate",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TokenUsageRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenUsageResponse"
                }
              }
            }
          },
          "401": {
            "description": "When no valid JWT token is provided"
          },
          "500": {
            "description": "When an internal server error occurs"
          }
        },
        "security": [
          {
            "bearer_auth": []
          }
        ]
      }
    },
    "/health": {
      "get": {
        "tags": [],
        "summary": "Get health of the API.",
        "operationId": "health",
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "head": {
        "tags": [],
        "summary": "Get health of the API.",
        "operationId": "health",
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AllDrivesResponse": {
        "type": "object",
        "description": "Response for the all-drives endpoint",
        "required": [
          "drives"
        ],
        "properties": {
          "drives": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Drive"
            },
            "description": "List of drives accessible to the user"
          }
        }
      },
      "ArchiveAssistantRequest": {
        "type": "object",
        "description": "Request to archive an assistant"
      },
      "ArchiveAssistantResponse": {
        "type": "object",
        "description": "Response when archiving an assistant",
        "required": [
          "id",
          "archived_at"
        ],
        "properties": {
          "archived_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the assistant was archived"
          },
          "id": {
            "type": "string",
            "description": "The ID of the archived assistant"
          }
        }
      },
      "ArchiveChatRequest": {
        "type": "object",
        "description": "Request to archive a chat"
      },
      "ArchiveChatResponse": {
        "type": "object",
        "description": "Response from the archive chat endpoint",
        "required": [
          "chat_id",
          "archived_at"
        ],
        "properties": {
          "archived_at": {
            "type": "string",
            "format": "date-time",
            "description": "The time when the chat was archived"
          },
          "chat_id": {
            "type": "string",
            "description": "The ID of the archived chat"
          }
        }
      },
      "Assistant": {
        "type": "object",
        "description": "An assistant model",
        "required": [
          "id",
          "name",
          "prompt",
          "created_at",
          "updated_at",
          "can_edit"
        ],
        "properties": {
          "archived_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this assistant was archived"
          },
          "can_edit": {
            "type": "boolean",
            "description": "Whether the current user can edit this assistant\n\nNOTE: Currently this is true only for the assistant owner. In the future,\nthis may include collaborators/roles/policy-based permissions."
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this assistant was created"
          },
          "default_chat_provider": {
            "type": "string",
            "description": "Default chat provider/model ID for this assistant"
          },
          "description": {
            "type": "string",
            "description": "Optional description of the assistant"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the assistant"
          },
          "mcp_server_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of MCP server IDs available to this assistant"
          },
          "name": {
            "type": "string",
            "description": "The display name of the assistant"
          },
          "prompt": {
            "type": "string",
            "description": "The system prompt used by the assistant"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this assistant was last updated"
          }
        }
      },
      "AssistantFile": {
        "type": "object",
        "description": "A file associated with an assistant",
        "required": [
          "id",
          "filename",
          "download_url",
          "file_capability"
        ],
        "properties": {
          "download_url": {
            "type": "string",
            "description": "Pre-signed URL for downloading the file"
          },
          "file_capability": {
            "$ref": "#/components/schemas/FileCapability",
            "description": "The file capability that was evaluated for this file"
          },
          "filename": {
            "type": "string",
            "description": "The original filename"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the file"
          }
        }
      },
      "AssistantWithFiles": {
        "allOf": [
          {
            "$ref": "#/components/schemas/Assistant",
            "description": "The assistant information"
          },
          {
            "type": "object",
            "required": [
              "files"
            ],
            "properties": {
              "files": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/AssistantFile"
                },
                "description": "Files associated with this assistant"
              }
            }
          }
        ],
        "description": "An assistant with its associated files"
      },
      "BudgetCurrency": {
        "type": "string",
        "enum": [
          "EUR",
          "USD"
        ]
      },
      "BudgetStatusResponse": {
        "type": "object",
        "description": "Budget status information for the current user",
        "required": [
          "enabled"
        ],
        "properties": {
          "budget_currency": {
            "$ref": "#/components/schemas/BudgetCurrency",
            "description": "The currency configured for display purposes"
          },
          "budget_limit": {
            "type": "number",
            "format": "double",
            "description": "The budget limit for the time period (unit-less)"
          },
          "budget_period_days": {
            "type": "integer",
            "format": "int32",
            "description": "Number of days in the current budget period",
            "minimum": 0
          },
          "current_spending": {
            "type": "number",
            "format": "double",
            "description": "Current spending in the budget period for the user (unit-less)"
          },
          "enabled": {
            "type": "boolean",
            "description": "Whether the budget feature is enabled"
          },
          "warn_threshold": {
            "type": "number",
            "format": "double",
            "description": "The warning threshold (0.0 to 1.0)"
          }
        }
      },
      "Chat": {
        "type": "object",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string"
          }
        },
        "deprecated": true
      },
      "ChatMessage": {
        "type": "object",
        "description": "A message in a chat",
        "required": [
          "id",
          "chat_id",
          "role",
          "content",
          "created_at",
          "updated_at",
          "is_message_in_active_thread",
          "input_files_ids",
          "files"
        ],
        "properties": {
          "chat_id": {
            "type": "string",
            "description": "The ID of the chat this message belongs to"
          },
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContentPart"
            },
            "description": "The text content of the message"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the message was created"
          },
          "error": {
            "$ref": "#/components/schemas/GenerationErrorType",
            "description": "Optional error information if generation failed"
          },
          "feedback": {
            "$ref": "#/components/schemas/MessageFeedback",
            "description": "Optional feedback for this message"
          },
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FileUploadItem"
            },
            "description": "Resolved file objects for all input_files_ids"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the message"
          },
          "input_files_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "The IDs of the files that were used to generate this message"
          },
          "is_message_in_active_thread": {
            "type": "boolean",
            "description": "Whether this message is in the active thread"
          },
          "previous_message_id": {
            "type": "string",
            "description": "The ID of the previous message in the thread, if any"
          },
          "role": {
            "type": "string",
            "description": "Role of the message sender. May be on of \"user\", \"assistant\", \"system\""
          },
          "sibling_message_id": {
            "type": "string",
            "description": "The unique ID of the sibling message, if any"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the message was last updated"
          }
        }
      },
      "ChatMessageStats": {
        "type": "object",
        "description": "Statistics for a list of chat messages",
        "required": [
          "total_count",
          "current_offset",
          "returned_count",
          "has_more"
        ],
        "properties": {
          "current_offset": {
            "type": "integer",
            "format": "int64",
            "description": "Current offset in the list",
            "minimum": 0
          },
          "has_more": {
            "type": "boolean",
            "description": "Whether there are more messages available"
          },
          "returned_count": {
            "type": "integer",
            "description": "Number of messages in the current response",
            "minimum": 0
          },
          "total_count": {
            "type": "integer",
            "format": "int64",
            "description": "Total number of messages in the chat"
          }
        }
      },
      "ChatMessagesResponse": {
        "type": "object",
        "description": "Response for the chat_messages endpoint",
        "required": [
          "messages",
          "stats"
        ],
        "properties": {
          "messages": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ChatMessage"
            },
            "description": "The list of messages"
          },
          "stats": {
            "$ref": "#/components/schemas/ChatMessageStats",
            "description": "Statistics about the message list"
          }
        }
      },
      "ChatModel": {
        "type": "object",
        "description": "A chat model available to the user",
        "required": [
          "chat_provider_id",
          "model_display_name"
        ],
        "properties": {
          "chat_provider_id": {
            "type": "string",
            "description": "The unique ID of the chat provider"
          },
          "model_display_name": {
            "type": "string",
            "description": "The display name of the model shown to users"
          }
        }
      },
      "ContentPart": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ContentPartText"
              },
              {
                "type": "object",
                "required": [
                  "content_type"
                ],
                "properties": {
                  "content_type": {
                    "type": "string",
                    "enum": [
                      "text"
                    ]
                  }
                }
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ToolUse"
              },
              {
                "type": "object",
                "required": [
                  "content_type"
                ],
                "properties": {
                  "content_type": {
                    "type": "string",
                    "enum": [
                      "tool_use"
                    ]
                  }
                }
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ContentPartTextFilePointer"
              },
              {
                "type": "object",
                "required": [
                  "content_type"
                ],
                "properties": {
                  "content_type": {
                    "type": "string",
                    "enum": [
                      "text_file_pointer"
                    ]
                  }
                }
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ContentPartImageFilePointer"
              },
              {
                "type": "object",
                "required": [
                  "content_type"
                ],
                "properties": {
                  "content_type": {
                    "type": "string",
                    "enum": [
                      "image_file_pointer"
                    ]
                  }
                }
              }
            ]
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/ContentPartImage"
              },
              {
                "type": "object",
                "required": [
                  "content_type"
                ],
                "properties": {
                  "content_type": {
                    "type": "string",
                    "enum": [
                      "image"
                    ]
                  }
                }
              }
            ]
          }
        ]
      },
      "ContentPartImage": {
        "type": "object",
        "required": [
          "content_type",
          "base64_data"
        ],
        "properties": {
          "base64_data": {
            "type": "string"
          },
          "content_type": {
            "type": "string"
          }
        }
      },
      "ContentPartImageFilePointer": {
        "type": "object",
        "required": [
          "file_upload_id",
          "download_url"
        ],
        "properties": {
          "download_url": {
            "type": "string"
          },
          "file_upload_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "ContentPartText": {
        "type": "object",
        "required": [
          "text"
        ],
        "properties": {
          "text": {
            "type": "string"
          }
        }
      },
      "ContentPartTextFilePointer": {
        "type": "object",
        "required": [
          "file_upload_id"
        ],
        "properties": {
          "file_upload_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "CreateAssistantRequest": {
        "type": "object",
        "description": "Request to create a new assistant",
        "required": [
          "name",
          "prompt"
        ],
        "properties": {
          "default_chat_provider": {
            "type": [
              "string",
              "null"
            ],
            "description": "Default chat provider/model ID for this assistant"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional description of the assistant"
          },
          "file_ids": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "Optional list of file upload IDs to associate with this assistant"
          },
          "mcp_server_ids": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "List of MCP server IDs available to this assistant"
          },
          "name": {
            "type": "string",
            "description": "The name of the assistant"
          },
          "prompt": {
            "type": "string",
            "description": "The system prompt for the assistant"
          },
          "share_grants": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "$ref": "#/components/schemas/ShareGrantInput"
            },
            "description": "Optional list of share grants to create with the assistant"
          }
        }
      },
      "CreateAssistantResponse": {
        "allOf": [
          {
            "$ref": "#/components/schemas/AssistantWithFiles",
            "description": "The created assistant with files"
          }
        ],
        "description": "Response when creating an assistant"
      },
      "CreateChatRequest": {
        "type": "object",
        "description": "Request to create a new chat without an initial message",
        "properties": {
          "assistant_id": {
            "type": "string",
            "description": "Optional assistant ID to base this chat on"
          },
          "title_by_user_provided": {
            "type": "string",
            "description": "Optional user-specified display name for the chat.\nIf set, this takes precedence over auto-generated summary titles."
          }
        }
      },
      "CreateChatResponse": {
        "type": "object",
        "description": "Response for create_chat endpoint",
        "required": [
          "chat_id"
        ],
        "properties": {
          "chat_id": {
            "type": "string",
            "description": "The ID of the newly created chat"
          }
        }
      },
      "CreateShareGrantRequest": {
        "type": "object",
        "description": "Request to create a new share grant",
        "required": [
          "resource_type",
          "resource_id",
          "subject_type",
          "subject_id_type",
          "subject_id",
          "role"
        ],
        "properties": {
          "resource_id": {
            "type": "string",
            "description": "The ID of the resource to share"
          },
          "resource_type": {
            "type": "string",
            "description": "The type of resource to share (e.g., \"assistant\")"
          },
          "role": {
            "type": "string",
            "description": "The role to grant (e.g., \"viewer\")"
          },
          "subject_id": {
            "type": "string",
            "description": "The ID of the subject to grant access to"
          },
          "subject_id_type": {
            "type": "string",
            "description": "The type of subject ID (e.g., \"id\" or \"oidc_issuer_and_subject\")"
          },
          "subject_type": {
            "type": "string",
            "description": "The type of subject to grant access to (e.g., \"user\")"
          }
        }
      },
      "CreateShareGrantResponse": {
        "allOf": [
          {
            "$ref": "#/components/schemas/ShareGrant",
            "description": "The created share grant"
          }
        ],
        "description": "Response when creating a share grant"
      },
      "Drive": {
        "type": "object",
        "description": "A drive accessible to the user (OneDrive, Sharepoint, etc.)",
        "required": [
          "id",
          "name",
          "drive_type"
        ],
        "properties": {
          "drive_type": {
            "type": "string",
            "description": "The type of drive (e.g., \"personal\", \"documentLibrary\")"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the drive"
          },
          "name": {
            "type": "string",
            "description": "The display name of the drive"
          },
          "owner_name": {
            "type": "string",
            "description": "The owner of the drive, if available"
          }
        }
      },
      "DriveItem": {
        "type": "object",
        "description": "A drive item (file or folder)",
        "required": [
          "id",
          "name",
          "is_folder"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "The unique ID of the item"
          },
          "is_folder": {
            "type": "boolean",
            "description": "Whether this item is a folder"
          },
          "last_modified": {
            "type": "string",
            "format": "date-time",
            "description": "When the item was last modified"
          },
          "mime_type": {
            "type": "string",
            "description": "The MIME type (for files)"
          },
          "name": {
            "type": "string",
            "description": "The name of the item"
          },
          "size": {
            "type": "integer",
            "format": "int64",
            "description": "The size in bytes (for files)"
          },
          "web_url": {
            "type": "string",
            "description": "The web URL to access this item"
          }
        }
      },
      "DriveItemResponse": {
        "allOf": [
          {
            "$ref": "#/components/schemas/DriveItem",
            "description": "The drive item details"
          },
          {
            "type": "object",
            "required": [
              "drive_id"
            ],
            "properties": {
              "drive_id": {
                "type": "string",
                "description": "The drive ID this item belongs to"
              }
            }
          }
        ],
        "description": "Response for a single drive item"
      },
      "DriveItemsResponse": {
        "type": "object",
        "description": "Response for drive items endpoints",
        "required": [
          "items"
        ],
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DriveItem"
            },
            "description": "List of items in the drive or folder"
          }
        }
      },
      "EditMessageRequest": {
        "type": "object",
        "required": [
          "message_id",
          "replace_user_message"
        ],
        "properties": {
          "chat_provider_id": {
            "type": "string",
            "description": "The ID of the chat provider to use for generation. If not provided, will use the highest priority model for the user.",
            "example": "primary"
          },
          "message_id": {
            "type": "string",
            "format": "uuid",
            "description": "The ID of the message that should be edited with a new response. It will be considered a sibling message to the new message.",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "replace_input_files_ids": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "description": "The IDs of any files that should replace the input files. These files must already be uploaded to the file_uploads table.",
            "example": "[\"00000000-0000-0000-0000-000000000000\"]"
          },
          "replace_user_message": {
            "type": "string",
            "description": "The text of the message that should replace the user message.",
            "example": "Hello, world!"
          },
          "selected_facet_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs of facets selected by the user for this generation."
          }
        }
      },
      "EditMessageStreamingResponseMessage": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseAssistantMessageStarted",
                "description": "Sent when the assistant message entry has been created, before generation starts."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "assistant_message_started"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the assistant message entry has been created, before generation starts."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseMessageComplete",
                "description": "Sent when the assistant's response has been saved in full."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "assistant_message_completed"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the assistant's response has been saved in full."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseMessageTextDelta",
                "description": "Sent whenever a new text chunk is generated by the assistant."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "text_delta"
                    ]
                  }
                }
              }
            ],
            "description": "Sent whenever a new text chunk is generated by the assistant."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseToolCallProposed",
                "description": "Sent when the LLM proposes a tool call to be part of the assistant message."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "tool_call_proposed"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the LLM proposes a tool call to be part of the assistant message."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseToolCallUpdate",
                "description": "Sent to update the status of a tool call execution by the backend."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "tool_call_update"
                    ]
                  }
                }
              }
            ],
            "description": "Sent to update the status of a tool call execution by the backend."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseError",
                "description": "Sent when an error occurs during message generation."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "error"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when an error occurs during message generation."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseUserMessageSaved",
                "description": "Sent when the edited user message has been saved."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "user_message_saved"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the edited user message has been saved."
          }
        ]
      },
      "FacetInfo": {
        "type": "object",
        "required": [
          "id",
          "display_name",
          "default_enabled"
        ],
        "properties": {
          "default_enabled": {
            "type": "boolean"
          },
          "display_name": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "id": {
            "type": "string"
          }
        }
      },
      "FacetsResponse": {
        "type": "object",
        "required": [
          "global_facet_settings",
          "facets"
        ],
        "properties": {
          "facets": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FacetInfo"
            }
          },
          "global_facet_settings": {
            "$ref": "#/components/schemas/GlobalFacetSettings"
          }
        }
      },
      "FeedbackSentiment": {
        "type": "string",
        "description": "Sentiment for message feedback",
        "enum": [
          "positive",
          "negative"
        ]
      },
      "FileCapabilitiesQuery": {
        "type": "object",
        "properties": {
          "model_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional model ID to get capabilities specific to that model"
          }
        }
      },
      "FileCapability": {
        "type": "object",
        "description": "Represents what operations can be performed on files with specific types",
        "required": [
          "id",
          "extensions",
          "mime_types",
          "operations"
        ],
        "properties": {
          "extensions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "File extensions this capability applies to (e.g., [\"docx\", \"doc\"])\nSpecial value \"*\" indicates all extensions"
          },
          "id": {
            "type": "string",
            "description": "Stable identifier (e.g., 'word', 'pdf', 'image', 'other')"
          },
          "mime_types": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "MIME types this capability applies to (e.g., [\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"])\nMay contain wildcards like \"image/*\" or \"*/*\""
          },
          "operations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FileOperation"
            },
            "description": "Operations that can be performed on matching files"
          }
        }
      },
      "FileOperation": {
        "type": "string",
        "description": "Operations that can be performed on files",
        "enum": [
          "extract_text",
          "analyze_image"
        ]
      },
      "FileReference": {
        "type": "object",
        "description": "Minimal file reference containing only the file ID",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "The unique ID of the file"
          }
        }
      },
      "FileUploadItem": {
        "type": "object",
        "description": "Response for file upload",
        "required": [
          "id",
          "filename",
          "download_url",
          "file_capability"
        ],
        "properties": {
          "download_url": {
            "type": "string",
            "description": "Pre-signed URL for downloading the file directly from storage"
          },
          "file_capability": {
            "$ref": "#/components/schemas/FileCapability",
            "description": "The file capability that was evaluated for this file"
          },
          "filename": {
            "type": "string",
            "description": "The original filename of the uploaded file"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the uploaded file"
          }
        }
      },
      "FileUploadResponse": {
        "type": "object",
        "description": "Response for file upload",
        "required": [
          "files"
        ],
        "properties": {
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FileUploadItem"
            },
            "description": "The list of uploaded files with their IDs and filenames"
          }
        }
      },
      "FrequentAssistantItem": {
        "allOf": [
          {
            "$ref": "#/components/schemas/AssistantWithFiles",
            "description": "The assistant details"
          },
          {
            "type": "object",
            "required": [
              "usage_count"
            ],
            "properties": {
              "usage_count": {
                "type": "integer",
                "format": "int64",
                "description": "Number of times this assistant was used to create chats"
              }
            }
          }
        ],
        "description": "A frequently used assistant with usage statistics"
      },
      "FrequentAssistantsResponse": {
        "type": "object",
        "description": "Response for the frequent_assistants endpoint",
        "required": [
          "assistants"
        ],
        "properties": {
          "assistants": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FrequentAssistantItem"
            },
            "description": "The list of frequently used assistants"
          }
        }
      },
      "GenerationErrorType": {
        "oneOf": [
          {
            "type": "object",
            "description": "Content was filtered by the model provider's content policy.",
            "required": [
              "error_description",
              "error_type"
            ],
            "properties": {
              "error_description": {
                "type": "string",
                "description": "Description of why the content was filtered."
              },
              "error_type": {
                "type": "string",
                "enum": [
                  "content_filter"
                ]
              },
              "filter_details": {
                "oneOf": [
                  {
                    "type": "null"
                  },
                  {
                    "$ref": "#/components/schemas/Value",
                    "description": "Additional details about which filters were triggered."
                  }
                ]
              }
            }
          },
          {
            "type": "object",
            "description": "Rate limit was exceeded.",
            "required": [
              "error_description",
              "error_type"
            ],
            "properties": {
              "error_description": {
                "type": "string",
                "description": "Description of the rate limit error."
              },
              "error_type": {
                "type": "string",
                "enum": [
                  "rate_limit"
                ]
              }
            }
          },
          {
            "type": "object",
            "description": "Model or provider is unavailable.",
            "required": [
              "error_description",
              "error_type"
            ],
            "properties": {
              "error_description": {
                "type": "string",
                "description": "Description of the availability issue."
              },
              "error_type": {
                "type": "string",
                "enum": [
                  "model_unavailable"
                ]
              }
            }
          },
          {
            "type": "object",
            "description": "Invalid request parameters.",
            "required": [
              "error_description",
              "error_type"
            ],
            "properties": {
              "error_description": {
                "type": "string",
                "description": "Description of what was invalid."
              },
              "error_type": {
                "type": "string",
                "enum": [
                  "invalid_request"
                ]
              }
            }
          },
          {
            "type": "object",
            "description": "Generic error from the model provider.",
            "required": [
              "error_description",
              "error_type"
            ],
            "properties": {
              "error_description": {
                "type": "string",
                "description": "Description of the provider error."
              },
              "error_type": {
                "type": "string",
                "enum": [
                  "provider_error"
                ]
              },
              "status_code": {
                "type": [
                  "integer",
                  "null"
                ],
                "format": "int32",
                "description": "HTTP status code if available.",
                "minimum": 0
              }
            }
          },
          {
            "type": "object",
            "description": "Internal server error.",
            "required": [
              "error_description",
              "error_type"
            ],
            "properties": {
              "error_description": {
                "type": "string",
                "description": "Description of the internal error."
              },
              "error_type": {
                "type": "string",
                "enum": [
                  "internal_error"
                ]
              }
            }
          }
        ],
        "description": "Represents different types of errors that can occur during message generation."
      },
      "GlobalFacetSettings": {
        "type": "object",
        "required": [
          "only_single_facet",
          "show_facet_indicator_with_display_name"
        ],
        "properties": {
          "only_single_facet": {
            "type": "boolean",
            "description": "Whether one or multiple facets may be selected"
          },
          "show_facet_indicator_with_display_name": {
            "type": "boolean",
            "description": "Whether to show facet indicator with display name"
          }
        }
      },
      "LinkFileRequest": {
        "type": "object",
        "description": "Request to link an external file (SharePoint, Google Drive, etc.)",
        "required": [
          "source",
          "provider_metadata"
        ],
        "properties": {
          "chat_id": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional chat ID to associate the file with. If not provided, creates standalone files."
          },
          "provider_metadata": {
            "$ref": "#/components/schemas/SharepointProviderMetadata",
            "description": "Provider-specific metadata (e.g., drive_id, item_id for SharePoint)"
          },
          "source": {
            "type": "string",
            "description": "The source/provider type: \"sharepoint\" (future: \"google_drive\", etc.)"
          }
        }
      },
      "ListShareGrantsResponse": {
        "type": "object",
        "description": "Response when listing share grants",
        "required": [
          "grants"
        ],
        "properties": {
          "grants": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ShareGrant"
            },
            "description": "The list of share grants"
          }
        }
      },
      "Message": {
        "type": "object",
        "required": [
          "id"
        ],
        "properties": {
          "id": {
            "type": "string"
          }
        }
      },
      "MessageFeedback": {
        "type": "object",
        "description": "Message feedback response",
        "required": [
          "id",
          "sentiment",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "comment": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional comment text"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the feedback was created"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the feedback"
          },
          "sentiment": {
            "$ref": "#/components/schemas/FeedbackSentiment",
            "description": "Sentiment of the feedback"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When the feedback was last updated"
          }
        }
      },
      "MessageFeedbackRequest": {
        "type": "object",
        "description": "Request to submit or update message feedback",
        "required": [
          "sentiment"
        ],
        "properties": {
          "comment": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional comment text"
          },
          "sentiment": {
            "$ref": "#/components/schemas/FeedbackSentiment",
            "description": "Sentiment of the feedback (positive or negative)"
          }
        }
      },
      "MessageSubmitRequest": {
        "type": "object",
        "required": [
          "user_message"
        ],
        "properties": {
          "assistant_id": {
            "type": "string",
            "format": "uuid",
            "description": "Optional assistant ID to associate with the chat when creating a new chat.\nIf provided with an existing_chat_id, this field is ignored.",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "chat_provider_id": {
            "type": "string",
            "description": "The ID of the chat provider to use for generation. If not provided, will use the highest priority model for the user.",
            "example": "primary"
          },
          "existing_chat_id": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid",
            "description": "The ID of an existing chat to use. If provided, the chat with this ID will be used instead of creating a new one.\nThis is useful for scenarios where you have created a chat first (e.g. for file uploads) before sending the first message.",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "input_files_ids": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "description": "The IDs of any files attached to this message. These files must already be uploaded to the file_uploads table.\nThe files should normally only be provided with the first message they appear in the chat. After that they can assumed to be part of the chat history.",
            "example": "[\"00000000-0000-0000-0000-000000000000\"]"
          },
          "previous_message_id": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid",
            "description": "The ID of the message that this message is a response to. If this is the first message in the chat, this should be empty.",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "selected_facet_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs of facets selected by the user for this generation."
          },
          "title_by_user_provided": {
            "type": "string",
            "description": "Optional user-specified display name for a newly created chat.\nIgnored when existing_chat_id is provided."
          },
          "user_message": {
            "type": "string",
            "description": "The text of the message.",
            "example": "Hello, world!"
          }
        }
      },
      "MessageSubmitStreamingResponseAssistantMessageStarted": {
        "type": "object",
        "required": [
          "message_id"
        ],
        "properties": {
          "message_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "MessageSubmitStreamingResponseChatCreated": {
        "type": "object",
        "required": [
          "chat_id"
        ],
        "properties": {
          "chat_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "MessageSubmitStreamingResponseError": {
        "allOf": [
          {
            "$ref": "#/components/schemas/GenerationErrorType",
            "description": "The error details."
          },
          {
            "type": "object",
            "properties": {
              "message_id": {
                "type": [
                  "string",
                  "null"
                ],
                "format": "uuid",
                "description": "The message ID if available (may not be present if error occurred before message creation)."
              }
            }
          }
        ]
      },
      "MessageSubmitStreamingResponseMessage": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseChatCreated",
                "description": "May optionally be sent at the start of the stream to indicate that a new chat has been created."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "chat_created"
                    ]
                  }
                }
              }
            ],
            "description": "May optionally be sent at the start of the stream to indicate that a new chat has been created."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseUserMessageSaved",
                "description": "Sent at the start of the stream to indicate that the user's message has been saved."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "user_message_saved"
                    ]
                  }
                }
              }
            ],
            "description": "Sent at the start of the stream to indicate that the user's message has been saved."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseAssistantMessageStarted",
                "description": "Sent when the assistant message entry has been created, before generation starts."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "assistant_message_started"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the assistant message entry has been created, before generation starts."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseMessageComplete",
                "description": "Sent when the assistant's response has been saved in full."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "assistant_message_completed"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the assistant's response has been saved in full."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseMessageTextDelta",
                "description": "Sent whenever a new text chunk is generated by the assistant."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "text_delta"
                    ]
                  }
                }
              }
            ],
            "description": "Sent whenever a new text chunk is generated by the assistant."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseToolCallProposed",
                "description": "Sent when the LLM proposes a tool call to be part of the assistant message."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "tool_call_proposed"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the LLM proposes a tool call to be part of the assistant message."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseToolCallUpdate",
                "description": "Sent to update the status of a tool call execution by the backend."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "tool_call_update"
                    ]
                  }
                }
              }
            ],
            "description": "Sent to update the status of a tool call execution by the backend."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseError",
                "description": "Sent when an error occurs during message generation."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "error"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when an error occurs during message generation."
          }
        ]
      },
      "MessageSubmitStreamingResponseMessageComplete": {
        "type": "object",
        "required": [
          "message_id",
          "content",
          "message"
        ],
        "properties": {
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ContentPart"
            }
          },
          "message": {
            "$ref": "#/components/schemas/ChatMessage"
          },
          "message_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "MessageSubmitStreamingResponseMessageTextDelta": {
        "type": "object",
        "required": [
          "message_id",
          "content_index",
          "new_text"
        ],
        "properties": {
          "content_index": {
            "type": "integer",
            "minimum": 0
          },
          "message_id": {
            "type": "string",
            "format": "uuid"
          },
          "new_text": {
            "type": "string"
          }
        }
      },
      "MessageSubmitStreamingResponseToolCallProposed": {
        "type": "object",
        "required": [
          "message_id",
          "content_index",
          "tool_call_id",
          "tool_name"
        ],
        "properties": {
          "content_index": {
            "type": "integer",
            "minimum": 0
          },
          "input": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Value"
              }
            ]
          },
          "message_id": {
            "type": "string",
            "format": "uuid"
          },
          "tool_call_id": {
            "type": "string"
          },
          "tool_name": {
            "type": "string"
          }
        }
      },
      "MessageSubmitStreamingResponseToolCallUpdate": {
        "type": "object",
        "required": [
          "message_id",
          "content_index",
          "tool_call_id",
          "tool_name",
          "status"
        ],
        "properties": {
          "content_index": {
            "type": "integer",
            "minimum": 0
          },
          "input": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Value"
              }
            ]
          },
          "message_id": {
            "type": "string",
            "format": "uuid"
          },
          "output": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Value"
              }
            ]
          },
          "progress_message": {
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/ToolCallStatus"
          },
          "tool_call_id": {
            "type": "string"
          },
          "tool_name": {
            "type": "string"
          }
        }
      },
      "MessageSubmitStreamingResponseUserMessageSaved": {
        "type": "object",
        "required": [
          "message_id",
          "message"
        ],
        "properties": {
          "message": {
            "$ref": "#/components/schemas/ChatMessage"
          },
          "message_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "MultipartFormFile": {
        "type": "object",
        "required": [
          "name",
          "file"
        ],
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "contentMediaType": "application/octet-stream"
          },
          "name": {
            "type": "string"
          }
        }
      },
      "OrganizationGroup": {
        "type": "object",
        "description": "An organization group",
        "required": [
          "id",
          "display_name",
          "subject_type_id"
        ],
        "properties": {
          "display_name": {
            "type": "string",
            "description": "The display name of the group"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the group"
          },
          "subject_type_id": {
            "type": "string",
            "description": "The subject type ID to use when creating a share grant (always \"organization_group_id\")"
          }
        }
      },
      "OrganizationGroupsResponse": {
        "type": "object",
        "description": "Response for the organization groups endpoint",
        "required": [
          "groups"
        ],
        "properties": {
          "groups": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrganizationGroup"
            },
            "description": "List of groups in the organization"
          }
        }
      },
      "OrganizationUser": {
        "type": "object",
        "description": "An organization user",
        "required": [
          "id",
          "display_name",
          "subject_type_id"
        ],
        "properties": {
          "display_name": {
            "type": "string",
            "description": "The display name of the user"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the user"
          },
          "job_title": {
            "type": [
              "string",
              "null"
            ],
            "description": "The job title of the user"
          },
          "mail": {
            "type": [
              "string",
              "null"
            ],
            "description": "The email address of the user"
          },
          "subject_type_id": {
            "type": "string",
            "description": "The subject type ID to use when creating a share grant (always \"organization_user_id\")"
          }
        }
      },
      "OrganizationUsersResponse": {
        "type": "object",
        "description": "Response for the organization users endpoint",
        "required": [
          "users"
        ],
        "properties": {
          "users": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OrganizationUser"
            },
            "description": "List of users in the organization"
          }
        }
      },
      "PromptOptimizerRequest": {
        "type": "object",
        "description": "Request to optimize a prompt using the configured prompt optimizer.",
        "required": [
          "prompt"
        ],
        "properties": {
          "prompt": {
            "type": "string",
            "description": "The prompt to optimize."
          }
        }
      },
      "PromptOptimizerResponse": {
        "type": "object",
        "description": "Response containing the optimized prompt.",
        "required": [
          "optimized_prompt"
        ],
        "properties": {
          "optimized_prompt": {
            "type": "string",
            "description": "The optimized prompt returned by the model."
          }
        }
      },
      "RecentChat": {
        "type": "object",
        "required": [
          "id",
          "title_resolved",
          "last_message_at",
          "file_uploads",
          "can_edit"
        ],
        "properties": {
          "archived_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this chat was archived by the user."
          },
          "assistant_id": {
            "type": "string",
            "description": "The assistant ID if this chat is based on an assistant"
          },
          "assistant_name": {
            "type": "string",
            "description": "The name of the assistant if this chat is based on an assistant"
          },
          "can_edit": {
            "type": "boolean",
            "description": "Whether the current user can edit this chat (e.g., edit messages)\n\nNOTE: Currently this is true only for the chat owner. In the future,\nthis may include collaborators/roles/policy-based permissions."
          },
          "file_uploads": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FileReference"
            },
            "description": "Files uploaded to this chat"
          },
          "id": {
            "type": "string"
          },
          "last_chat_provider_id": {
            "type": "string",
            "description": "The chat provider ID used for the most recent message"
          },
          "last_message_at": {
            "type": "string",
            "format": "date-time",
            "description": "Time of the last message in the chat."
          },
          "last_model": {
            "$ref": "#/components/schemas/ChatModel",
            "description": "The model information for the most recent message, if available"
          },
          "last_selected_facets": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "The facets selected for the most recent message"
          },
          "title_by_summary": {
            "type": [
              "string",
              "null"
            ],
            "description": "Title of the chat as generated by summary automation."
          },
          "title_by_user_provided": {
            "type": [
              "string",
              "null"
            ],
            "description": "Title of the chat as explicitly provided by the user."
          },
          "title_resolved": {
            "type": "string",
            "description": "Resolved chat title where user-provided title takes precedence over summary title."
          }
        }
      },
      "RecentChatStats": {
        "type": "object",
        "description": "Statistics for a list of recent chats",
        "required": [
          "total_count",
          "current_offset",
          "returned_count",
          "has_more"
        ],
        "properties": {
          "current_offset": {
            "type": "integer",
            "format": "int64",
            "description": "Current offset in the list",
            "minimum": 0
          },
          "has_more": {
            "type": "boolean",
            "description": "Whether there are more chats available"
          },
          "returned_count": {
            "type": "integer",
            "description": "Number of chats in the current response",
            "minimum": 0
          },
          "total_count": {
            "type": "integer",
            "format": "int64",
            "description": "Total number of chats available"
          }
        }
      },
      "RecentChatsResponse": {
        "type": "object",
        "description": "Response for the recent_chats endpoint",
        "required": [
          "chats",
          "stats"
        ],
        "properties": {
          "chats": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/RecentChat"
            },
            "description": "The list of recent chats"
          },
          "stats": {
            "$ref": "#/components/schemas/RecentChatStats",
            "description": "Statistics about the chat list"
          }
        }
      },
      "RegenerateMessageRequest": {
        "type": "object",
        "required": [
          "current_message_id"
        ],
        "properties": {
          "chat_provider_id": {
            "type": "string",
            "description": "The ID of the chat provider to use for generation. If not provided, will use the highest priority model for the user.",
            "example": "primary"
          },
          "current_message_id": {
            "type": "string",
            "format": "uuid",
            "description": "The ID of the message that should have a replacement response generated.",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "selected_facet_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "IDs of facets selected by the user for this generation."
          }
        }
      },
      "RegenerateMessageStreamingResponseMessage": {
        "oneOf": [
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseAssistantMessageStarted",
                "description": "Sent when the assistant message entry has been created, before generation starts."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "assistant_message_started"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the assistant message entry has been created, before generation starts."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseMessageComplete",
                "description": "Sent when the assistant's response has been saved in full."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "assistant_message_completed"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the assistant's response has been saved in full."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseMessageTextDelta",
                "description": "Sent whenever a new text chunk is generated by the assistant."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "text_delta"
                    ]
                  }
                }
              }
            ],
            "description": "Sent whenever a new text chunk is generated by the assistant."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseToolCallProposed",
                "description": "Sent when the LLM proposes a tool call to be part of the assistant message."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "tool_call_proposed"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when the LLM proposes a tool call to be part of the assistant message."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseToolCallUpdate",
                "description": "Sent to update the status of a tool call execution by the backend."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "tool_call_update"
                    ]
                  }
                }
              }
            ],
            "description": "Sent to update the status of a tool call execution by the backend."
          },
          {
            "allOf": [
              {
                "$ref": "#/components/schemas/MessageSubmitStreamingResponseError",
                "description": "Sent when an error occurs during message generation."
              },
              {
                "type": "object",
                "required": [
                  "message_type"
                ],
                "properties": {
                  "message_type": {
                    "type": "string",
                    "enum": [
                      "error"
                    ]
                  }
                }
              }
            ],
            "description": "Sent when an error occurs during message generation."
          }
        ]
      },
      "ResumeStreamRequest": {
        "type": "object",
        "required": [
          "chat_id"
        ],
        "properties": {
          "chat_id": {
            "type": "string",
            "format": "uuid",
            "description": "The ID of the chat to resume streaming for.",
            "example": "00000000-0000-0000-0000-000000000000"
          }
        }
      },
      "ShareGrant": {
        "type": "object",
        "description": "A share grant model",
        "required": [
          "id",
          "resource_type",
          "resource_id",
          "subject_type",
          "subject_id_type",
          "subject_id",
          "role",
          "created_at",
          "updated_at"
        ],
        "properties": {
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this share grant was created"
          },
          "group_profile": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/OrganizationGroup",
                "description": "The group profile for organization group share grants."
              }
            ]
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the share grant"
          },
          "resource_id": {
            "type": "string",
            "description": "The ID of the resource being shared"
          },
          "resource_type": {
            "type": "string",
            "description": "The type of resource being shared (e.g., \"assistant\")"
          },
          "role": {
            "type": "string",
            "description": "The role being granted (e.g., \"viewer\")"
          },
          "subject_id": {
            "type": "string",
            "description": "The ID of the subject being granted access"
          },
          "subject_id_type": {
            "type": "string",
            "description": "The type of subject ID (e.g., \"id\" or \"oidc_issuer_and_subject\")"
          },
          "subject_type": {
            "type": "string",
            "description": "The type of subject being granted access (e.g., \"user\")"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this share grant was last updated"
          },
          "user_profile": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/OrganizationUser",
                "description": "The user profile for organization user share grants."
              }
            ]
          }
        }
      },
      "ShareGrantInput": {
        "type": "object",
        "description": "A share grant to create with the assistant",
        "required": [
          "subject_type",
          "subject_id_type",
          "subject_id",
          "role"
        ],
        "properties": {
          "role": {
            "type": "string",
            "description": "The role to grant (e.g., \"viewer\")"
          },
          "subject_id": {
            "type": "string",
            "description": "The ID of the subject to grant access to"
          },
          "subject_id_type": {
            "type": "string",
            "description": "The type of subject ID (e.g., \"id\" or \"oidc_issuer_and_subject\")"
          },
          "subject_type": {
            "type": "string",
            "description": "The type of subject to grant access to (e.g., \"user\")"
          }
        }
      },
      "SharepointProviderMetadata": {
        "type": "object",
        "description": "SharePoint-specific metadata for linking files",
        "required": [
          "drive_id",
          "item_id"
        ],
        "properties": {
          "drive_id": {
            "type": "string",
            "description": "The ID of the drive containing the file"
          },
          "item_id": {
            "type": "string",
            "description": "The ID of the file item"
          }
        }
      },
      "TokenUsageRequest": {
        "type": "object",
        "required": [
          "user_message"
        ],
        "properties": {
          "chat_provider_id": {
            "type": "string",
            "description": "Optional chat provider ID to use for token estimation. If not provided, uses the default provider.",
            "example": "gpt-4o"
          },
          "existing_chat_id": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid",
            "description": "The ID of an existing chat to use. If provided, the chat with this ID will be used instead of creating a new one.",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "input_files_ids": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "description": "The IDs of any files attached to this message. These files must already be uploaded to the file_uploads table.",
            "example": "[\"00000000-0000-0000-0000-000000000000\"]"
          },
          "previous_message_id": {
            "type": [
              "string",
              "null"
            ],
            "format": "uuid",
            "description": "The ID of the message that this message is a response to. If this is the first message in the chat, this should be empty.",
            "example": "00000000-0000-0000-0000-000000000000"
          },
          "user_message": {
            "type": "string",
            "description": "The text of the message.",
            "example": "Hello, world!"
          }
        }
      },
      "TokenUsageResponse": {
        "type": "object",
        "description": "Response for the token_usage_estimate endpoint",
        "required": [
          "stats",
          "file_details"
        ],
        "properties": {
          "file_details": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TokenUsageResponseFileItem"
            },
            "description": "Detailed token usage for each file"
          },
          "stats": {
            "$ref": "#/components/schemas/TokenUsageStats",
            "description": "Overall statistics about token usage"
          }
        }
      },
      "TokenUsageResponseFileItem": {
        "type": "object",
        "description": "Token usage details for an individual file",
        "required": [
          "id",
          "filename",
          "token_count"
        ],
        "properties": {
          "filename": {
            "type": "string",
            "description": "The original filename of the file"
          },
          "id": {
            "type": "string",
            "description": "The unique ID of the file"
          },
          "token_count": {
            "type": "integer",
            "description": "Number of tokens used for this file's content",
            "minimum": 0
          }
        }
      },
      "TokenUsageStats": {
        "type": "object",
        "description": "Token usage statistics for the request",
        "required": [
          "total_tokens",
          "user_message_tokens",
          "history_tokens",
          "file_tokens",
          "max_tokens",
          "remaining_tokens",
          "chat_provider_id"
        ],
        "properties": {
          "chat_provider_id": {
            "type": "string",
            "description": "The chat provider ID that was used for this estimation"
          },
          "file_tokens": {
            "type": "integer",
            "description": "Number of tokens in file contents",
            "minimum": 0
          },
          "history_tokens": {
            "type": "integer",
            "description": "Number of tokens in previous messages (chat history)",
            "minimum": 0
          },
          "max_tokens": {
            "type": "integer",
            "format": "int32",
            "description": "The configured model's maximum token limit",
            "minimum": 0
          },
          "remaining_tokens": {
            "type": "integer",
            "format": "int32",
            "description": "Remaining tokens available for the model response",
            "minimum": 0
          },
          "total_tokens": {
            "type": "integer",
            "description": "Total number of tokens in the request",
            "minimum": 0
          },
          "user_message_tokens": {
            "type": "integer",
            "description": "Number of tokens in the user message",
            "minimum": 0
          }
        }
      },
      "ToolCallStatus": {
        "type": "string",
        "enum": [
          "in_progress",
          "success",
          "error"
        ]
      },
      "ToolUse": {
        "type": "object",
        "required": [
          "tool_call_id",
          "status",
          "tool_name"
        ],
        "properties": {
          "input": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Value"
              }
            ]
          },
          "output": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/Value"
              }
            ]
          },
          "progress_message": {
            "type": [
              "string",
              "null"
            ]
          },
          "status": {
            "$ref": "#/components/schemas/ToolCallStatus"
          },
          "tool_call_id": {
            "type": "string"
          },
          "tool_name": {
            "type": "string"
          }
        }
      },
      "UpdateAssistantRequest": {
        "type": "object",
        "description": "Request to update an existing assistant",
        "properties": {
          "default_chat_provider": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional new default chat provider"
          },
          "description": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional new description for the assistant"
          },
          "file_ids": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "Optional list of file upload IDs to associate with this assistant"
          },
          "mcp_server_ids": {
            "type": [
              "array",
              "null"
            ],
            "items": {
              "type": "string"
            },
            "description": "Optional new list of MCP server IDs"
          },
          "name": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional new name for the assistant"
          },
          "prompt": {
            "type": [
              "string",
              "null"
            ],
            "description": "Optional new prompt for the assistant"
          }
        }
      },
      "UpdateAssistantResponse": {
        "allOf": [
          {
            "$ref": "#/components/schemas/AssistantWithFiles",
            "description": "The updated assistant with files"
          }
        ],
        "description": "Response when updating an assistant"
      },
      "UpdateChatRequest": {
        "type": "object",
        "description": "Request to update mutable chat fields.",
        "properties": {
          "title_by_user_provided": {
            "type": "string",
            "description": "Optional user-provided title update.\n- `\\\"some title\\\"` sets the title\n- `null` removes a previously set title\n- omitted is treated the same as `null`"
          }
        }
      },
      "UpdateChatResponse": {
        "type": "object",
        "description": "Response for update_chat endpoint.",
        "required": [
          "chat_id",
          "title_resolved"
        ],
        "properties": {
          "chat_id": {
            "type": "string",
            "description": "The ID of the updated chat"
          },
          "title_by_summary": {
            "type": [
              "string",
              "null"
            ],
            "description": "Title of the chat as generated by summary automation."
          },
          "title_by_user_provided": {
            "type": [
              "string",
              "null"
            ],
            "description": "Title of the chat as explicitly provided by the user."
          },
          "title_resolved": {
            "type": "string",
            "description": "Resolved chat title where user-provided title takes precedence over summary title."
          }
        }
      },
      "UserProfile": {
        "type": "object",
        "required": [
          "id",
          "preferred_language",
          "groups",
          "organization_group_ids"
        ],
        "properties": {
          "email": {
            "type": "string",
            "description": "The user's email address. Shouldn't be used as a unique identifier, as it may change."
          },
          "groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of groups the user belongs to.\n\nThis is derived from the `groups` claim in the ID token.\nIf the claim is not present, this will be an empty list."
          },
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "description": "The user's display name."
          },
          "organization_group_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Organization group IDs from the `groups` claim.\n\nThese can be used as subject_id when creating share grants\nwith subject_id_type \"organization_group_id\"."
          },
          "organization_user_id": {
            "type": "string",
            "description": "Organization user ID from the `oid` claim (Entra ID specific).\n\nThis can be used as the subject_id when creating share grants\nwith subject_id_type \"organization_user_id\"."
          },
          "picture": {
            "type": "string",
            "description": "The user's profile picture URL."
          },
          "preferred_language": {
            "type": "string",
            "description": "The user's preferred language.\n\nThe final determined language is intersected with our supported languages, to determine the final language.\n\nWill be a BCP 47 language tag (e.g. \"en\" or \"en-US\").\n\nThis is derived in the following order (highest priority first):\n- ID token claims\n- Browser Accept-Language header\n- Default to \"en\""
          }
        }
      },
      "Value": {}
    }
  }
}