global:
  # -- Environment marker for diagnostic/observability tools (not parsed by application)
  environment: production
  # -- Global Docker registry secret names as an array
  imagePullSecrets: []

# -- String to partially override common.names.fullname
nameOverride: ""
# -- Labels to add to all deployed objects
commonLabels: {}
# -- Annotations to add to all deployed objects
commonAnnotations: {}

ingress:
  # -- Enable ingress record generation for Erato
  enabled: true
  # -- Default host for the ingress record
  host: app.erato.internal
  # -- IngressClass that will be used to implement the Ingress
  className: nginx
  # -- Additional annotations for the Ingress resource
  annotations: {}
  tls:
    # -- Enable TLS configuration for the host defined at ingress.host
    enabled: false
    # -- Secret containing TLS certificate
    secretName: ""
  # -- Additional paths to add to the ingress (e.g., for custom services)
  # Example:
  # extraPaths:
  #   - path: /custom-path
  #     pathType: Prefix
  #     backend:
  #       service:
  #         name: my-service
  #         port:
  #           name: http
  extraPaths: []

oauth2Proxy:
  # -- Enable OAuth2 Proxy for authentication
  enabled: true
  image:
    # -- OAuth2 Proxy image repository
    repository: quay.io/oauth2-proxy/oauth2-proxy
    # -- OAuth2 Proxy image tag
    tag: v7.8.1
    # -- OAuth2 Proxy image pull policy
    pullPolicy: IfNotPresent
    # -- OAuth2 Proxy image pull secrets
    pullSecrets: []
  # -- Array with extra environment variables to add to oauth2-proxy
  extraEnvVars: []
  # -- Name of existing ConfigMap containing extra env vars for oauth2-proxy
  extraEnvVarsCM: ""
  # -- Name of existing Secret containing extra env vars for oauth2-proxy
  extraEnvVarsSecret: ""
  # -- Optionally specify extra list of additional volumes for the oauth2-proxy pod
  extraVolumes: []
  # -- Optionally specify extra list of additional volumeMounts for the oauth2-proxy container
  extraVolumeMounts: []
  # -- Full configuration file content for oauth2-proxy
  config: |
    # Example configuration - replace with your own
    # http_address = "0.0.0.0:4180"
    # upstreams = ["http://localhost:8080"]
    # email_domains = ["*"]
    # cookie_secret = ""
    # cookie_secure = true
    # skip_auth_regex = ["^/health", "^/metrics"]
  # -- Annotations to add to the oauth2-proxy deployment
  deploymentAnnotations: {}
  # -- Annotations to add to the oauth2-proxy pod
  podAnnotations: {}
  resources:
    requests:
      # -- The requested CPU for oauth2-proxy
      cpu: 100m
      # -- The requested memory for oauth2-proxy
      memory: 128Mi
    limits:
      # -- The CPU limit for oauth2-proxy
      cpu: 500m
      # -- The memory limit for oauth2-proxy
      memory: 256Mi

  redis:
    # -- Enable Redis for OAuth2 Proxy session storage
    enabled: true
    image:
      # -- Redis image repository
      repository: redis
      # -- Redis image tag
      tag: 7.0-alpine
      # -- Redis image pull policy
      pullPolicy: IfNotPresent
    resources:
      requests:
        # -- The requested CPU for Redis
        cpu: 10m
        # -- The requested memory for Redis
        memory: 32Mi
      limits:
        # -- The CPU limit for Redis
        cpu: 100m
        # -- The memory limit for Redis
        memory: 128Mi
    persistence:
      # -- Enable persistence using Persistent Volume Claims
      enabled: true
      # -- Persistent Volume size
      size: 1Gi
      # -- Persistent Volume storage class
      # storageClass: ""
      # -- Persistent Volume access modes
      accessModes:
        - ReadWriteOnce

backend:
  image:
    # -- Backend image repository
    repository: harbor.imassage.me/erato/app
    # -- Backend image tag (immutable tags are recommended)
    tag: ""
    # -- Backend image pull policy
    pullPolicy: IfNotPresent
    # -- Backend image pull secrets
    pullSecrets: []
  # -- Optional deployment version for cache headers on static files (falls back to image tag if not set)
  deploymentVersion: ""
  # -- Number of backend replicas to deploy
  replicaCount: 1
  # -- Array with extra environment variables to add to backend
  extraEnvVars: []
  # -- Name of existing ConfigMap containing extra env vars for backend
  extraEnvVarsCM: ""
  # -- Name of existing Secret containing extra env vars for backend
  extraEnvVarsSecret: ""
  # -- Optionally specify extra list of additional volumes for the backend pod
  extraVolumes: []
  # -- Optionally specify extra list of additional volumeMounts for the backend container
  extraVolumeMounts: []
  # -- Annotations to add to the backend deployment
  deploymentAnnotations: {}
  # -- Annotations to add to the backend pod
  podAnnotations: {}
  configFile:
    # -- Name of the secret containing the erato.toml file
    secretName: ""
    # -- Key in the secret that contains the erato.toml content
    secretKey: ""
    # -- Name of the configMap containing the erato.toml file (alternative to secretName/secretKey)
    configMapName: ""
    # -- Key in the configMap that contains the erato.toml content
    configMapKey: ""
    # -- Inline content for erato.toml (alternative to secret/configMap)
    inlineContent: ""
  # -- Optional list of additional config files to mount (e.g., *.auto.erato.toml files)
  # Example:
  # extraConfigFiles:
  #   - name: mcp-servers
  #     secretName: mcp-config-secret
  #     secretKey: mcp-servers.toml
  #   - name: additional-config
  #     configMapName: additional-config-cm
  #     configMapKey: additional.toml
  #   - name: inline-config
  #     inlineContent: |
  #       [mcp_servers.example]
  #       ...
  extraConfigFiles: []
  resources:
    requests:
      # -- The requested CPU for backend
      cpu: 100m
      # -- The requested memory for backend
      memory: 128Mi
    limits:
      # -- The CPU limit for backend
      cpu: 500m
      # -- The memory limit for backend
      memory: 512Mi
  service:
    # -- Backend service type
    type: ClusterIP
    # -- Backend service HTTP port
    port: 8080
  metrics:
    # -- Enable backend Prometheus metrics integration and related chart resources.
    enabled: false
    # -- Host to bind the backend metrics listener to.
    host: 0.0.0.0
    # -- Port for backend metrics listener.
    port: 3131
    configFile:
      # -- Render and mount an additional `*.auto.erato.toml` config file that enables `integrations.prometheus`.
      enabled: true
    service:
      # -- Create a dedicated Service for the backend metrics endpoint.
      enabled: false
      # -- Metrics Service type.
      type: ClusterIP
      # -- Metrics Service port.
      port: 3131
      # -- Additional labels for metrics Service.
      labels: {}
      # -- Additional annotations for metrics Service.
      annotations: {}
      # -- Add standard `prometheus.io/*` scrape annotations to the metrics Service.
      addPrometheusAnnotations: true
    serviceMonitor:
      # -- Create a ServiceMonitor resource for Prometheus Operator.
      enabled: false
      # -- Namespace for ServiceMonitor. Defaults to the release namespace when empty.
      namespace: ""
      # -- Additional labels for ServiceMonitor (for Prometheus selection).
      labels: {}
      # -- Scrape interval for ServiceMonitor endpoint.
      interval: 30s
      # -- Optional scrape timeout for ServiceMonitor endpoint.
      scrapeTimeout: ""
      # -- Whether to honor labels from scraped metrics.
      honorLabels: false
      # -- Relabel configs for ServiceMonitor endpoint.
      relabelings: []
      # -- Metric relabel configs for ServiceMonitor endpoint.
      metricRelabelings: []
  # -- Array of secret names to load as environment variables
  envSecrets: []

postgresql:
  # -- Deprecated - has no effect. Support for postgresql sub-chart has been removed.
  enabled: false

  external:
    # -- PostgreSQL connection string (plain value)
    connectionString:
      value: "postgresql://postgres:postgres@localhost:5432/postgres"
